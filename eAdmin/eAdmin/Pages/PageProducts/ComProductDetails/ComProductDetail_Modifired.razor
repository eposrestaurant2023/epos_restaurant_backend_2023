@inject IHttpService http
@inject IStringLocalizer<Resource> lang
@if (!is_loading && models.Any()) {

    <UIContainerBox Title="@lang["Modifier Information"]"> 
        <ComProductDetail_TableViewModifier models="@models" product_category_id="@product.product_category_id" />
    </UIContainerBox>
    <Spacing Number="10" />
}
@code {
    [CascadingParameter] public GlobalVariableModel gv { get; set; }
    [Parameter] public ProductModel product {get; set;}
    List<ProductModifierModel> models = new List<ProductModifierModel>();
    bool is_loading;

    protected override async Task OnInitializedAsync()
    {
        is_loading = true;
        if(product.id > 0){
            var resp = await http.ApiGetOData($"ProductModifier?$expand=children($expand=modifier($select=id,modifier_group_id,modifier_name);$orderby=sort_order desc;$filter=is_deleted eq false)&$filter=product_id eq {product.id} and is_deleted eq false and status eq true");
            if (resp.IsSuccess)
            {
                models = JsonSerializer.Deserialize<List<ProductModifierModel>>(resp.Content.ToString());
            }
        }
        is_loading = false;
    }
}
