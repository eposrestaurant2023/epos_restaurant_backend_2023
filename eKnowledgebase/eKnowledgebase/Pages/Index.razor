@page "/"
@inject NavigationManager nav;
@inject eKnowledgebase.Services.eKnowledgebaseService s;
<PageTitle>Home Page</PageTitle>

@if (is_loading)
{
    <div>loading...</div>
}else
{
    
    <MudContainer MaxWidth="MaxWidth.Medium">
     <MudGrid Spacing="3">
        @foreach(var d in models.OrderBy(r=>r.sort_order)){ 
          <MudItem xs="12" md="6" lg="4" Class="cus_homepage">
              <MudCard @onclick="@(()=> nav.NavigateTo($"app/{d.id}"))" Style="text-align: center;min-height:200px;" Class="d-flex align-center justify-center pc pa-2 mud-width-full mud-height-full">

                    <div>
                       <MudCardContent>
                        <MudText Typo="Typo.h6">@d.title_en</MudText>
                     </MudCardContent>
                     <MudImage Src="images/cashier.png" Width="100" Height="75" Class="rounded-lg"/>
                    </div>
            </MudCard>
        </MudItem>
        }
    </MudGrid>
    </MudContainer>
}




@code{
    List<eKnowledgebaseModel> models = new();
    bool is_loading;

    [CascadingParameter]
    public AppState state { get; set; }
    protected override async Task OnInitializedAsync()
    {
        is_loading = true;
        models = await s.GetModulesAsync();
        is_loading = false;
    }

}

    
}