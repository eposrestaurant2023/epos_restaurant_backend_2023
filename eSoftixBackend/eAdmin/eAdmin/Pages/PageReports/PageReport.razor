@page "/report"
@layout ReportLayout

<PageContainer>
 <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudPaper Elevation="25" Class="px-3 py-6 mr-6" MinWidth="250px">
        <MudList>
            @foreach (var p in app.gv.permission_options.Where(r=>r.parent_id == 9))
            {
            <MudListItem OnClick="@(()=>MainReport_Click(p.id))">
              @p.note  
            </MudListItem>
            }
        </MudList>
        
        </MudPaper>
    </MudHidden>
    <MudPaper Elevation="25" Class="py-4 flex-grow-1">
        
        @if(main_report_id > 0){
            <MudList>
                @foreach (var sp in app.gv.permission_options.Where(r=>r.parent_id == main_report_id)){
                    <MudListItem>
                      @sp.note  
                    </MudListItem>
                }
        </MudList>
        }
        else
        {
            <MudList>
                @foreach (var sp in app.gv.permission_options.Where(r=>r.parent_id == main_report_id)){
                    <MudListItem>
                      @sp.note  
                    </MudListItem>
                }
        </MudList>
        }
        </MudPaper>
    
        
</PageContainer>

@code {
    [CascadingParameter] public AppState app {get;set;}
    int main_report_id = 0;

    protected override void OnInitialized()
    {
        Console.WriteLine(JsonSerializer.Serialize(app.gv.permission_options.Where(r=>r.parent_id == 9)));
    }

    void MainReport_Click(int id){
        main_report_id = id;
    }

}
