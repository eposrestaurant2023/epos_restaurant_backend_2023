@page "/report"
@layout ReportLayout

<PageContainer>
 <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudPaper Elevation="25" Class="px-3 py-6 mr-6" MinWidth="250px">
         <MudTextField @bind-Value="TextValue" Variant="Variant.Outlined" Margin="Margin.Dense" Placeholder="Search"/>
            <MudList Clickable="true" @bind-SelectedItem="selectedItem">
                @foreach (var p in app.gv.permission_options.Where(r=>r.parent_id == 9))
                {
                    <MudListItem OnClick="@(()=>MainReport_Click(p.id))" Text="@(p.note)">
                       <NestedList>
                        @if (main_report_id > 0)
                        {
                              @foreach (var sp in app.gv.permission_options.Where(r=>r.parent_id == p.id)){
                                 <MudListItem Text="@sp.note" />
                            }
                        }
                        else
                        {
                            @foreach (var sp in app.gv.permission_options.Where(r=>r.parent_id == p.id))
                            {
                                 <MudListItem Text="@sp.note" />
                            }
                       }
                    </NestedList>
                    </MudListItem>
                }
            </MudList>
        </MudPaper>
    </MudHidden>
    <MudPaper Elevation="25" Class="py-4 flex-grow-1">
          

    </MudPaper>
    
        
</PageContainer>

@code {
    [CascadingParameter] public AppState app {get;set;}

    public string TextValue { get; set; }

    int main_report_id = 0;

    MudListItem selectedItem;

    void MainReport_Click(int id){
        main_report_id = id;
    }

}
