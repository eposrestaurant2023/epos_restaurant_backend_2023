 

@if(model!=null){ 
    
      
    <MudGrid> 

        
        <MudItem xs="12" lg="4">
            <ComDashboardKPI Title="Warehouse" color="@MudBlazor.Color.Success" Icon="@Icons.Material.Filled.CropSquare" Value="@model.stock_locations.Where(r=>r.is_deleted == false).Count().ToString()"/>
        </MudItem>
        <MudItem xs="12" lg="4">
            <ComDashboardKPI Title="Outlet" color="@MudBlazor.Color.Primary" Icon="@Icons.Material.Filled.BusinessCenter" Value="@model.outlets.Where(r=>r.is_deleted == false).Count().ToString()"/>
        </MudItem>
        <MudItem xs="12" lg="4">
            <ComDashboardKPI Title="Station" color="@MudBlazor.Color.Info" Icon="@Icons.Material.Filled.DesktopWindows" Value="@model.outlets.SelectMany(r=>r.stations.Where(r=>r.is_deleted == false)).Count().ToString()"/>
        </MudItem>
    </MudGrid>
    <Spacing/>

    <ComBusinessBranchDetail_BusinessBranchInformation model="@model" modelChanged="@OnModelChanged"/>
    <Spacing/>
    <ComBusinessBranchDetail_SystemFeature business_branch="@model" business_branch_id="@(model.id.ToString())"/>
    <Spacing/>
    <ComBusinessBranchDetail_StockLocation stock_locations="@model.stock_locations" business_branch="@model"/>
    <Spacing/>
    <ComBusinessBranchDetail_OutletAndStation outlets="@model.outlets" business_branch="@model"/>
}
@code {

    [Parameter] public BusinessBranchModel model { get; set; }
    [Parameter] public EventCallback<BusinessBranchModel> modelChanged { get; set; }
    [CascadingParameter] public AppState gv { get; set; }

    async Task OnModelChanged(){
        await modelChanged.InvokeAsync(model);
    }
 
}

