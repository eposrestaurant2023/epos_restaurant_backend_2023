{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-03-15 09:32:52.359704",
 "css": "\r\n@media print {\r\n    .print-format{\r\n    padding: 1px !important;\r\n    }\r\n    .report-list thead tr th {\r\n        background:#686868 !important;\r\n         -webkit-print-color-adjust: exact!important; \r\n    }\r\n}\r\n\r\n.report-list thead tr th{\r\n   background: #686868 !important;\r\n         -webkit-print-color-adjust: exact!important; \r\n}\r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 5px !important;\r\n}\r\n.print-format{\r\n    padding: 2px !important;\r\n}\r\n.print-format td{\r\n    padding: 4px !important;\r\n    border: none !important;\r\n}\r\n.report-list td,.report-list th {\r\n    padding: 3px !important;\r\n    font-size: 12px !important;\r\n    \r\n}\r\n.tbl-list tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 10px !important;\r\n    border: none !important;\r\n}\r\n.tbl-list tr td:nth-child(2){\r\n    padding-left: 1px !important;\r\n    padding-right: 1px !important;\r\n    \r\n}\r\n.tbl-list-right tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n    padding-top: 4px !important;\r\n    padding-bottom: 4px !important;\r\n    border: none !important;\r\n}\r\n.report-list thead {\r\n    border: 1px solid #d9d9d9 !important;\r\n}\r\n.tbl-list-summary{\r\n    margin-top:10px;\r\n}\r\n.tbl-list-summary td{\r\n    font-size: 12px;\r\n    font-weight:bold;\r\n}\r\n.summary-value{\r\n    text-align:right;\r\n}\r\n.payment p{\r\n    font-size: 10px;\r\n}\r\n.center {\r\n  text-align: center;\r\n  margin-top: 20px !important;\r\n}\r\n.print-format .row:not(.section-break){\r\n    margin-top:0px!important;\r\n}\r\nhr{\r\n     display: block!important;\r\n  height: 1px!important;\r\n  border: 0!important;\r\n  border-top: 1px solid #000000!important;\r\n  margin: 0px!important;\r\n}\r\n\r\n*{\r\n    color:#000000!important;\r\n}",
 "custom_format": 0,
 "disabled": 0,
 "doc_type": "Cashier Shift",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n    <h4 onclick=\\\"window.parent.postMessage('123456', '*')\\\">{{_(\\\"Close Cashier Shift Summary\\\")}}</h4>\\n    <h5>{{doc.name}}</h5>\\n</center>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Shift Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"working_day\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Working Day\"}, {\"fieldname\": \"business_branch\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Business Branch\"}, {\"fieldname\": \"outlet\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Outlet\"}, {\"fieldname\": \"pos_profile\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"POS Profile\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Created Date:\\\")}} </label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{frappe.format(doc.creation,{'fieldtype':'Datetime'})}}\\n    </div>\\n</div>\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Opened By:\\\")}} </label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{ frappe.get_doc(\\\"User\\\", doc.owner).full_name}}\\n    </div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%if doc.is_closed %}\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Status\\\")}}</label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{_(\\\"Closed\\\")}}\\n    </div>\\n</div>\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Closed Date:\\\")}}</label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{frappe.format(doc.modified,{'fieldtype':'Datetime'})}}\\n    </div>\\n</div>\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Closed By:\\\")}}</label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{ frappe.get_doc(\\\"User\\\", doc.modified_by).full_name}}\\n    </div>\\n</div>\\n{%endif%}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Transaction\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\r\\nset sale_transactions = frappe.db.sql(\\\"\\r\\nselect sale_type, count(name) as total_transaction from `tabSale` \\r\\nwhere cashier_shift = '{0}' and docstatus = 1 and is_foc=0 group by sale_type\\r\\nunion \\r\\nselect 'FOC', count(name) as total_transaction from `tabSale` where cashier_shift = '{0}' and docstatus = 1 and is_foc=1\\\".format(doc.name),as_dict=1)\\r\\n%}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"# Transactions\\\")}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{sale_transactions |sum(attribute='total_transaction')}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n{% for t in sale_transactions %}\\r\\n{% if t.total_transaction %}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{t.sale_type}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{t.total_transaction}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n{% endif %}\\r\\n{% endfor %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Cash Drawer\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\r\\nset cash_transactions = frappe.db.sql(\\\"\\r\\n    select \\r\\n        transaction_status,\\r\\n        currency,\\r\\n        symbol,\\r\\n    sum(input_amount) as total_amount\\r\\n    from `tabCash Transaction`\\r\\n    where cashier_shift = '{}'\\r\\n    group by\\r\\n        transaction_status,\\r\\n        currency,\\r\\n        symbol\\r\\n    \\r\\n\\\".format(doc.name),as_dict=1)\\r\\n%}\\r\\n\\r\\n{% for t in doc.cash_float| selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash')  %}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Starting Amount\\\")}} ({{t.currency}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.utils.fmt_money(t.input_amount,currency=t.currency_symbol)}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n {% endfor %}\\r\\n <hr/>\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Total Opening Amount\\\")}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.format_value(doc.total_opening_amount, \\\"Currency\\\")}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n<!--Start Render Cash In/Out-->\\r\\n{% for t in cash_transactions %}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(t.transaction_status)}} ({{t.currency}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n      <div>{{frappe.utils.fmt_money(t.total_amount,currency=t.symbol)}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n {% endfor %}\\r\\n <!--End Render Cash In/Out-->\\r\\n \\r\\n <!--Start Render Cash Sale-->\\r\\n {% \\r\\nset cash_sale = frappe.db.sql(\\\"\\r\\nselect \\r\\n    sum(payment_amount) as payment_amount \\r\\nfrom `tabSale Payment`\\r\\nwhere cashier_shift = '{}' and payment_type_group='Cash'\\\".format(doc.name),as_dict=1)\\r\\n%}\\r\\n \\r\\n \\r\\n <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Total Cash sale\\\")}} ({{frappe.db.get_default(\\\"currency\\\")}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.format_value(cash_sale[0].payment_amount, \\\"Currency\\\")}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n \\r\\n <!--Start render close amount-->\\r\\n \\r\\n{% for t in doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') %}\\r\\n{% if t.input_close_amount %}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Close Amount\\\")}} ({{t.currency}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.utils.fmt_money(t.input_close_amount,currency=t.currency_symbol)}}</div>\\r\\n    </div>\\r\\n    \\r\\n</div>\\r\\n{% endif %}\\r\\n{% endfor %}\\r\\n \\r\\n {% if doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash')  | sum(attribute='close_amount') %}\\r\\n <hr/>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Total Closed Amount\\\")}} ({{frappe.db.get_default(\\\"Currency\\\")}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.format_value(doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') | sum(attribute='close_amount'), \\\"Currency\\\")}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n{% endif %}\\r\\n{% if doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') | sum(attribute='system_close_amount') %}\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Expected Cash\\\")}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n       <div>{{frappe.format_value(doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') | sum(attribute='system_close_amount'), \\\"Currency\\\")}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n{% endif %}\\r\\n{% if doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') | sum(attribute='different_amount')%}\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Different Amount\\\")}} ({{frappe.db.get_default(\\\"Currency\\\")}})</div>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n      <div>{{frappe.format_value(doc.cash_float | selectattr(\\\"payment_type_group\\\", \\\"equalto\\\", 'Cash') | sum(attribute='different_amount'), \\\"Currency\\\")}}</div>\\r\\n    </div>\\r\\n</div>\\r\\n{% endif %}\\r\\n\\r\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Sale Summary\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n{% \\r\\n    set sale_transactions = frappe.db.sql(\\\"select \\r\\n         coalesce(sum(if(is_foc=0,sub_total,0)),0) as sub_total,\\r\\n        coalesce(sum(if(is_foc=0,total_discount,0)),0) as total_discount,\\r\\n        coalesce(sum(if(is_foc=0,tax_1_amount,0)),0) as tax_1,\\r\\n        coalesce(sum(if(is_foc=0,tax_2_amount,0)),0) as tax_2,\\r\\n        coalesce(sum(if(is_foc=0,tax_3_amount,0)),0) as tax_3,\\r\\n        coalesce(sum(if(is_foc = 1,grand_total,0)),0) as total_foc_amount,\\r\\n        coalesce(sum(if(is_foc = 0,grand_total,0)),0) as grand_total\\r\\n    from `tabSale`\\r\\n    where \\r\\n        cashier_shift = '{}' and \\r\\n        docstatus=1\\r\\n    \\\".format(doc.name),as_dict=1)\\r\\n%}\\r\\n\\r\\n{% for t in sale_transactions %}\\r\\n<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-6\\\">\\r\\n        <div>{{_(\\\"Sale Sub Total\\\")}}</div>\\r\\n        {% if t.total_discount%}\\r\\n        <div>{{_(\\\"Total Discount\\\")}}</div>\\r\\n        {% endif %}\\r\\n        <div>{{_(\\\"Total Net Sale\\\")}}</div>\\r\\n        {% if t.tax_1 %}\\r\\n        <div>{{_(\\\"Tax 1\\\")}}</div>\\r\\n        {% endif %}\\r\\n        {% if t.tax_2 %}\\r\\n        <div>{{_(\\\"Tax 2\\\")}}</div>\\r\\n        {% endif %}\\r\\n        {% if t.tax_3 %}\\r\\n        <div>{{_(\\\"Tax 3\\\")}}</div>\\r\\n        {% endif %}\\r\\n        <div>{{_(\\\"Total Sale Revenue\\\")}}</div>\\r\\n        {% if t.total_foc_amount %}\\r\\n        <div>{{_(\\\"Total FOC Amoun\\\")}}t</div>\\r\\n        {% endif %}\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-6 text-right\\\">\\r\\n        <div>{{frappe.format_value(t.sub_total,\\\"Currency\\\")}}</div>\\r\\n        {% if t.total_discount %}\\r\\n        <div>{{frappe.format_value(t.total_discount,\\\"Currency\\\")}}</div>\\r\\n        {% endif %}\\r\\n        <div>{{frappe.format_value(t.grand_total,\\\"Currency\\\")}}</div>\\r\\n        {% if t.tax_1 %}\\r\\n        <div>{{frappe.format_value(t.tax_1,\\\"Currency\\\")}}</div>\\r\\n        {% endif %}\\r\\n        {% if t.tax_2 %}\\r\\n        <div>{{frappe.format_value(t.tax_2,\\\"Currency\\\")}}</div>\\r\\n        {% endif %}\\r\\n        {% if t.tax_3 %}\\r\\n        <div>{{frappe.format_value(t.tax_3,\\\"Currency\\\")}}</div>\\r\\n        {% endif %}\\r\\n        <div>{{frappe.format_value(t.grand_total,\\\"Currency\\\")}}</div>\\r\\n        {% if t.total_foc_amount %}\\r\\n        <div>{{frappe.format_value(t.total_foc_amount,\\\"Currency\\\")}}</div>\\r\\n        {% endif %}\\r\\n    </div>\\r\\n</div>\\r\\n{% endfor %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Sale By Revenue Group\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\nset sale_transactions = frappe.db.sql(\\\"\\nselect revenue_group,\\nsum(total_revenue) as amount from `tabSale Product` sp\\ninner join tabSale s on s.name = sp.parent\\nwhere s.cashier_shift = '{}' and s.is_foc=0\\ngroup by revenue_group\\\".format(doc.name),as_dict=1)\\n%}\\n{% for t in sale_transactions %}\\n{% if t.amount %}\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <div>{{t.revenue_group}}</div>\\n    </div>\\n    <div class=\\\"col-xs-6 text-right\\\">\\n        <div>{{frappe.format_value(t.amount,\\\"Currency\\\")}}</div>\\n    </div>\\n</div>\\n{% endif %}\\n{% endfor %}\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"FOC By Revenue Group\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\nset sale_transactions = frappe.db.sql(\\\"\\nselect revenue_group,\\nsum(total_revenue) as amount from `tabSale Product` sp\\ninner join tabSale s on s.name = sp.parent\\nwhere s.cashier_shift = '{}' and s.is_foc=1\\ngroup by revenue_group\\\".format(doc.name),as_dict=1)\\n%}\\n\\n{% for t in sale_transactions %}\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <div>{{t.revenue_group}}</div>\\n    </div>\\n    <div class=\\\"col-xs-6 text-right\\\">\\n        <div>{{frappe.format_value(t.amount,\\\"Currency\\\")}}</div>\\n    </div>\\n</div>\\n{% endfor %}\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\nset sale_transactions = frappe.db.sql(\\\"\\nselect \\n    payment_type,\\n    symbol,\\n      sum(input_amount) as input_amount ,\\n    sum(payment_amount) as payment_amount from `tabSale Payment`\\n    where cashier_shift = '{}'\\ngroup by\\n    symbol,\\n    payment_type\\\".format(doc.name),as_dict=1)\\n%}\\n<h4>Payment Breakdown</h4>\\n{% for t in sale_transactions %}\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <div>{{t.payment_type}}</div>\\n    </div>\\n    <div class=\\\"col-xs-6 text-right\\\">\\n       <div>{{frappe.utils.fmt_money(t.input_amount,currency=t.symbol)}}</div>\\n    </div>\\n</div>\\n{% endfor %}\\n{% if sale_transactions |sum(attribute='payment_amount') %}\\n<hr/>\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <div>{{_(\\\"Total Payment\\\")}} ({{frappe.db.get_default(\\\"Currency\\\")}})</div>\\n    </div>\\n    <div class=\\\"col-xs-6 text-right\\\">\\n      <div>{{frappe.format_value((sale_transactions |sum(attribute='payment_amount')),\\\"Currency\\\")}}</div>\\n    </div>\\n</div>\\n{% endif %}\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 0.0,
 "margin_left": 0.0,
 "margin_right": 0.0,
 "margin_top": 0.0,
 "modified": "2023-03-17 16:45:36.223712",
 "modified_by": "Administrator",
 "module": "Selling",
 "name": "Close Shift Summary Report",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 1,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "print_invoice_copies": 0,
 "print_receipt_copies": 0,
 "print_report_name": "Close Shift Summary Report",
 "raw_printing": 0,
 "receipt_height": 11.0,
 "receipt_margin_bottom": 0.0,
 "receipt_margin_left": 0.0,
 "receipt_margin_right": 0.0,
 "receipt_margin_top": 0.0,
 "receipt_width": 3.14,
 "show_in_pos": 1,
 "show_in_pos_report": 1,
 "show_section_headings": 1,
 "sort_order": 0,
 "standard": "Yes",
 "title": "Sale Summary"
}