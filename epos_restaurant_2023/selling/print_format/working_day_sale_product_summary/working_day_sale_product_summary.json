{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-03-17 13:58:14.902269",
 "css": "\r\n@media print {\r\n    .print-format{\r\n    padding: 1px !important;\r\n    }\r\n    \r\n}\r\nh4{\r\n    margin-bottom:0!important;\r\n}\r\n \r\n.report-list {\r\n    margin-top: 10px !important;\r\n    margin-bottom: 5px !important;\r\n}\r\n.print-format{\r\n    padding: 2px !important;\r\n}\r\n.print-format td{\r\n    padding: 4px !important;\r\n    border: none !important;\r\n  \r\n}\r\n.report-list td,.report-list th {\r\n    padding: 3px !important;\r\n    font-size: 12px !important;\r\n    \r\n}\r\n.tbl-list tr td {\r\n    padding: 4px 0px !important;\r\n    font-size: 10px !important;\r\n    border: none !important;\r\n}\r\n.tbl-list tr td:nth-child(2){\r\n    padding-left: 1px !important;\r\n    padding-right: 1px !important;\r\n    \r\n}\r\n.tbl-list-right tr td:nth-child(3){\r\n    text-align: right;\r\n}\r\n\r\n.report-list thead tr th {\r\n    color: #000;\r\n    font-weight: 600;\r\n    padding-top: 4px !important;\r\n    padding-bottom: 4px !important;\r\nborder-bottom: solid 1px black!important;\r\n \r\n}\r\n.report-list tfood tr td {\r\n    font-weight:bold!important;\r\n \r\n}\r\n\r\n.tbl-list-summary{\r\n    margin-top:10px;\r\n}\r\n.tbl-list-summary td{\r\n    font-size: 12px;\r\n    font-weight:bold;\r\n}\r\n.summary-value{\r\n    text-align:right;\r\n}\r\n.payment p{\r\n    font-size: 10px;\r\n}\r\n.center {\r\n  text-align: center;\r\n  margin-top: 20px !important;\r\n}\r\n.print-format .row:not(.section-break){\r\n    margin-top:0px!important;\r\n}\r\n\r\n*{\r\n    color:#000000!important;\r\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Working Day",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<center>\\n<h4>{{_(\\\"Working Day Sale Product Summary Report\\\")}}</h4>\\n<h5>{{ doc.name }}</h5>\\n</center>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Working Day Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"business_branch\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Business Branch\"}, {\"fieldname\": \"outlet\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Outlet\"}, {\"fieldname\": \"pos_profile\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"POS Profile\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Created Date:\\\")}} </label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{frappe.format(doc.creation,{'fieldtype':'Datetime'})}}\\n    </div>\\n</div>\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\n    <div class=\\\"col-xs-5\\\">\\n        <label>{{_(\\\"Opened By:\\\")}} </label>\\n    </div>\\n    <div class=\\\"col-xs-7 text-right value\\\">\\n        {{ frappe.get_doc(\\\"User\\\", doc.owner).full_name}}\\n    </div>\\n</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\r\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"outlet\\\" data-fieldtype=\\\"Data\\\">\\r\\n     {% if doc.is_closed %}\\r\\n    <div class=\\\"col-xs-5\\\">\\r\\n        <label>{{_(\\\"Status: \\\")}}</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-7 text-right value\\\">{{_(\\\"Closed\\\")}}</div>\\r\\n   \\r\\n    <div class=\\\"col-xs-5\\\">\\r\\n        <label>{{_(\\\"Closed Date: \\\")}}</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-7 text-right value\\\">\\r\\n        {{frappe.format(doc.closed_date,{'fieldtype':'Datetime'})}}\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-5\\\">\\r\\n        <label>{{_(\\\"Closed By: \\\")}}</label>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-7 text-right value\\\">\\r\\n        {{ frappe.get_doc(\\\"User\\\", doc.owner).full_name}}\\r\\n    </div>\\r\\n    {% endif %}\\r\\n    </div>\\r\\n     \"}, {\"fieldtype\": \"Section Break\", \"label\": \"Sale Products\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\r\\n    set sale_transactions = frappe.db.sql(\\\"\\r\\n         select \\r\\n            p.product_category, \\r\\n            p.product_group, \\r\\n            concat(p.product_name,if(coalesce(p.portion,'')='','',concat('-', p.portion)),if(p.is_free=1,'-Free','')) as product_name, \\r\\n            sum(p.quantity) as qty, \\r\\n            sum(p.total_discount) as discount,\\r\\n            sum(p.total_revenue) as total_revenue,\\r\\n            sum(p.tax_1_amount) as tax_1_amount,\\r\\n            sum(p.tax_2_amount) as tax_2_amount,\\r\\n            sum(p.tax_3_amount) as tax_3_amount,\\r\\n            p.price, \\r\\n            sum(p.sub_total) as amount \\r\\n        from `tabSale Product` p\\r\\n        inner join `tabSale` s on s.name = p.parent\\r\\n        where \\r\\n            s.working_day = '{}' and \\r\\n            s.docstatus = 1 and\\r\\n            s.is_foc = 0\\r\\n        group by \\r\\n            product_category,\\r\\n            product_group,\\r\\n            product_name,\\r\\n            p.price,\\r\\n            p.is_free,\\r\\n            p.portion\\r\\n    \\\".format(doc.name),as_dict=1)\\r\\n%}\\r\\n<table class=\\\"table table-bordered report-list\\\">\\r\\n    <thead>\\r\\n        \\r\\n        <tr>\\r\\n        \\r\\n        <th><strong>{{_(\\\"Product Name\\\")}}</strong></th>\\r\\n        \\r\\n        <th class = 'text-right'><strong>{{_(\\\"Price\\\")}}</strong></th>\\r\\n     \\r\\n        <th class = 'text-center'><strong>{{_(\\\"Qty\\\")}}</strong></th>\\r\\n        \\r\\n        <th class = 'text-right'><strong>{{_(\\\"Amount\\\")}}</strong></th>\\r\\n\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {% for product_group in sale_transactions | map(attribute='product_group') | unique  %}\\r\\n        {% for product_category in sale_transactions |selectattr(\\\"product_group\\\", \\\"equalto\\\", product_group) |map(attribute='product_category') | unique  %}\\r\\n             <tr>\\r\\n                <td colspan=\\\"3\\\"><strong>{{product_group}} => {{product_category}}</strong></td>\\r\\n            </tr>\\r\\n\\r\\n        {% for p in sale_transactions |selectattr(\\\"product_category\\\", \\\"equalto\\\", product_category) %}\\r\\n            <tr>\\r\\n                <td>{{p.product_name}}</td>\\r\\n                <td align = 'right'>{{frappe.format_value(p.price, \\\"Currency\\\")}}</td>\\r\\n                <td align = 'center'>{{p.qty}}</td>\\r\\n                <td align = 'right'>{{frappe.format_value(p.amount,\\\"Currency\\\")}}</td>\\r\\n            </tr>\\r\\n\\r\\n        {%endfor%}\\r\\n        <!--Start render total category-->\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" class=\\\"text-right\\\"><strong>{{_(\\\"Total\\\")}} - {{product_category}}</strong></td>\\r\\n                <td align = 'center'><strong>{{sale_transactions | selectattr(\\\"product_category\\\", \\\"equalto\\\", product_category)|sum(attribute='qty')}}</strong></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions | selectattr(\\\"product_category\\\", \\\"equalto\\\", product_category)|sum(attribute='amount'),'Currency')}}</strong></td>\\r\\n            </tr>\\r\\n\\r\\n        {%endfor%}\\r\\n                <!--Start render total product_group-->\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Total\\\")}} - {{product_group}}</strong></td>\\r\\n                <td align = 'center'><strong>{{sale_transactions | selectattr(\\\"product_group\\\", \\\"equalto\\\", product_group)|sum(attribute='qty')}}</strong></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions | selectattr(\\\"product_group\\\", \\\"equalto\\\", product_group)|sum(attribute='amount'), \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n        {%endfor%}\\r\\n        \\r\\n\\r\\n </tbody>\\r\\n  <!--Start render footer sub total, discount tax and total revenue-->\\r\\n <tfoot>\\r\\n             <tr><td colspan=\\\"4\\\"></td></tr>\\r\\n             \\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Total Quantity\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{sale_transactions |sum(attribute='qty')}}</strong></td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Sub Total\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='amount'),  \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Discount\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='discount'),  \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n          {% if sale_transactions |sum(attribute='tax_1_amount') > 0 %}\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Tax 1\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='tax_1_amount'),  \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n            {% endif %}\\r\\n            {% if sale_transactions |sum(attribute='tax_2_amount') > 0 %}\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Tax 2\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='tax_2_amount'),  \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n            {% endif%}\\r\\n            {% if sale_transactions |sum(attribute='tax_3_amount') > 0 %}\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Tax 3\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='tax_3_amount'),  \\\"Currency\\\")}}</strong></td>\\r\\n            </tr>\\r\\n            {% endif %}\\r\\n           \\r\\n          <tr>\\r\\n                <td colspan=\\\"2\\\" align = 'right'><strong>{{_(\\\"Total Revenue\\\")}}</strong></td>\\r\\n                <td></td>\\r\\n                <td align = 'right'><strong>{{frappe.format_value(sale_transactions |sum(attribute='total_revenue'),  \\\"Currency\\\")}}</strong></td>\\r\\n               \\r\\n            </tr>\\r\\n\\r\\n            \\r\\n    </tfoot>\\r\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Sale Summary by Revenue Group\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\nset sale_transactions = frappe.db.sql(\\\"\\nselect revenue_group,\\n    sum(sp.quantity) as total_qty,\\n    sum(total_revenue) as amount \\nfrom `tabSale Product` sp\\n    inner join tabSale s on s.name = sp.parent\\nwhere \\n    s.working_day = '{}' and \\n    s.is_foc=0 and \\n    s.docstatus = 1\\ngroup by revenue_group\\\".format(doc.name),as_dict=1)\\n%}\\n\\n<table class=\\\"table table-bordered report-list\\\">\\n    <thead>\\n        <tr>\\n            <th>{{_(\\\"Revenue Group\\\")}}</th>\\n            <th class=\\\"text-center\\\">{{_(\\\"QTY\\\")}}</th>\\n            <th class=\\\"text-right\\\">{{_(\\\"Amount\\\")}}</th>\\n        </tr>\\n        \\n    </thead>\\n    <tbody>\\n        {% for t in sale_transactions %}\\n        <tr>\\n            <td>{{t.revenue_group}}</td>\\n            <td class=\\\"text-center\\\">{{t.total_qty}}</td>\\n            <td class=\\\"text-right\\\">{{frappe.format_value(t.amount,\\\"Currency\\\")}}</td>\\n            \\n        </tr>\\n        {% endfor %}\\n    </tbody>\\n    <tfoot>\\n        <tr>\\n            <td><strong>{{_(\\\"Total\\\")}} </strong></td>\\n            <td  class=\\\"text-center\\\"><strong>{{sale_transactions |sum(attribute='total_qty')}}</strong></td>\\n            <td class=\\\"text-right\\\"><strong>{{frappe.format_value(sale_transactions |sum(attribute='amount'),\\\"Currency\\\")}} </strong></td>\\n            \\n        </tr>\\n        \\n    </tfoot>\\n</table>\\n\\n\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% \\nset sale_transactions = frappe.db.sql(\\\"\\nselect product_name,\\n    sum(sp.quantity) as total_qty,\\n    sum(total_revenue) as amount,\\n    sp.portion,\\n    concat(sp.product_name,if(sp.is_free=1,'-Free','')) as product_name, \\n    sp.is_free\\nfrom `tabSale Product` sp\\n    inner join tabSale s on s.name = sp.parent\\nwhere \\n    s.working_day = '{}' and \\n    s.is_foc=1 and \\n    s.docstatus = 1\\ngroup by product_name\\\".format(doc.name),as_dict=1)\\n%}\\n{% if sale_transactions %}\\n    \\n    <h4 class=\\\"col-sm-12\\\" style=\\\"padding-left:0;margin-bottom:10px!important\\\">FOC</h4>\\n    <table class=\\\"table table-bordered report-list\\\">\\n        <thead>\\n            <tr>\\n                <th>{{_(\\\"Product Name\\\")}}</th>\\n                <th class=\\\"text-center\\\">{{_(\\\"QTY\\\")}}</th>\\n                <th class=\\\"text-right\\\">{{_(\\\"Amount\\\")}}</th>\\n            </tr>\\n            \\n        </thead>\\n        <tbody>\\n            {% for t in sale_transactions %}\\n            <tr>\\n                <td>{{t.product_name}}  {{t.portion}}</td>\\n                <td class=\\\"text-center\\\">{{t.total_qty}}</td>\\n                <td class=\\\"text-right\\\">{{frappe.format_value(t.amount,\\\"Currency\\\")}}</td>\\n                \\n            </tr>\\n            {% endfor %}\\n        </tbody>\\n        <tfoot>\\n            <tr>\\n                <td><strong>{{_(\\\"Total\\\")}} </strong></td>\\n                <td  class=\\\"text-center\\\"><strong>{{sale_transactions |sum(attribute='total_qty')}}</strong></td>\\n                <td class=\\\"text-right\\\"><strong>{{frappe.format_value(sale_transactions |sum(attribute='amount'),\\\"Currency\\\")}} </strong></td>\\n                \\n            </tr>\\n            \\n        </tfoot>\\n    </table>\\n{% endif %}\\n\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2023-03-20 15:54:22.420934",
 "modified_by": "Administrator",
 "module": "Selling",
 "name": "Working Day Sale Product Summary",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 1,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "print_invoice_copies": 0,
 "print_receipt_copies": 0,
 "raw_printing": 0,
 "receipt_height": 11.0,
 "receipt_margin_bottom": 0.0,
 "receipt_margin_left": 0.0,
 "receipt_margin_right": 0.0,
 "receipt_margin_top": 0.0,
 "receipt_width": 3.14,
 "show_in_pos": 1,
 "show_in_pos_report": 1,
 "show_section_headings": 1,
 "sort_order": 3,
 "standard": "Yes",
 "title": "Sale Product Summary"
}