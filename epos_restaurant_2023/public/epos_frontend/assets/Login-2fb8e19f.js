var f=(r,e,a)=>new Promise((_,u)=>{var s=t=>{try{c(a.next(t))}catch(m){u(m)}},n=t=>{try{c(a.throw(t))}catch(m){u(m)}},c=t=>t.done?_(t.value):Promise.resolve(t.value).then(s,n);c((a=a.apply(r,e)).next())});import{_ as v,b as p,e as d,t as w,s as h,v as b,k as i,w as l,p as o,u as y,r as k,o as g}from"./index-53d9811e.js";const x={data(){return{username:"Administrator",password:""}},inject:["$auth","$call"],mounted(){return f(this,null,function*(){var r,e;(e=(r=this.$route)==null?void 0:r.query)!=null&&e.route&&(this.redirect_route=this.$route.query.route,this.$router.replace({query:null}))})},methods:{numpad_click(r){this.password==null&&(this.password=""),this.password=this.password+r},clear_password(){this.password=""},login(){return f(this,null,function*(){try{this.$store.state.isLoading=!0;let r=yield this.$call("epos_restaurant_2023.api.api.check_username",{pin_code:this.password});this.username=r.username,this.username&&this.password&&((yield this.$auth.login(this.username,this.password))?this.$router.push({name:"Home"}):this.$toast.warning("Login fail. Invalid username or password."))}catch(r){this.$toast.warning(r.messages.join(`
`))}finally{this.$store.state.isLoading=!1}})}},computed:{ePOSSettings(){return this.$store.state.ePOSSettings}}},C={class:"h-full w-full py-16 px-4"},S={class:"flex flex-col items-center justify-center"},$={class:"bg-red-800 shadow rounded lg:w-1/3 md:w-1/2 w-full p-10 mt-16"},L={class:"mt-6 w-full"},P=["src"],O={for:"pass",class:"text-sm font-medium leading-none text-gray-800"},j={class:"relative flex items-center justify-center"},V={class:"mt-8"},q=d("div",{id:"x"},"xxx",-1),B={key:0,role:"button",type:"submit",class:"mysubmit focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 text-sm font-semibold leading-none text-white focus:outline-none bg-indigo-700 border rounded hover:bg-indigo-600 py-4 w-full"},N={key:1,role:"button",type:"button",disabled:"",class:"focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 text-sm font-semibold leading-none text-white focus:outline-none bg-indigo-700 border rounded hover:bg-indigo-600 py-4 w-full"};function D(r,e,a,_,u,s){const n=k("v-btn"),c=k("v-progress-circular");return g(),p("div",C,[d("form",{onSubmit:e[12]||(e[12]=y((...t)=>s.login&&s.login(...t),["prevent"]))},[d("div",S,[d("div",$,[d("div",L,[d("img",{src:s.ePOSSettings.epos_logo},null,8,P),d("label",O," Password "+w(s.ePOSSettings.epos_app_name)+" "+w(s.ePOSSettings.epos_logo),1),d("div",j,[h(d("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.password=t),id:"pass",type:"password",class:"bg-gray-200 border rounded text-xs font-medium leading-none text-gray-800 py-3 w-full pl-3 mt-2"},null,512),[[b,u.password]])])]),d("div",V,[i(n,{onClick:e[1]||(e[1]=t=>s.numpad_click("1"))},{default:l(()=>[o(" 1 ")]),_:1}),i(n,{onClick:e[2]||(e[2]=t=>s.numpad_click("2"))},{default:l(()=>[o(" 2 ")]),_:1}),i(n,{onClick:e[3]||(e[3]=t=>s.numpad_click("3"))},{default:l(()=>[o(" 3 ")]),_:1}),i(n,{onClick:e[4]||(e[4]=t=>s.numpad_click("4"))},{default:l(()=>[o(" 4 ")]),_:1}),i(n,{onClick:e[5]||(e[5]=t=>s.numpad_click("5"))},{default:l(()=>[o(" 5 ")]),_:1}),i(n,{onClick:e[6]||(e[6]=t=>s.numpad_click("6"))},{default:l(()=>[o(" 6 ")]),_:1}),i(n,{onClick:e[7]||(e[7]=t=>s.numpad_click("7"))},{default:l(()=>[o(" 7 ")]),_:1}),i(n,{onClick:e[8]||(e[8]=t=>s.numpad_click("8"))},{default:l(()=>[o(" 8 ")]),_:1}),i(n,{onClick:e[9]||(e[9]=t=>s.numpad_click("9"))},{default:l(()=>[o(" 9 ")]),_:1}),i(n,{onClick:e[10]||(e[10]=t=>s.numpad_click("0"))},{default:l(()=>[o(" 0 ")]),_:1}),i(n,{onClick:e[11]||(e[11]=t=>s.numpad_click("0"))}),i(n,{onClick:s.clear_password},{default:l(()=>[o(" Clear ")]),_:1},8,["onClick"]),q,this.$store.state.isLoading?(g(),p("button",N,[o(" Login "),i(c,{indeterminate:"",color:"primary"})])):(g(),p("button",B," Login "))])])])],32)])}const A=v(x,[["render",D]]);export{A as default};
