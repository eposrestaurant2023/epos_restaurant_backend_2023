import{_ as M,i as R,a as v,u as U,b as W,r as q,c as H,d as y,e as T,w as i,f as m,o as C,g as t,h as s,j as o,t as g,n as F,k as G,l as r,m as K,p as Q,q as x,A as X}from"./index-2bbbf589.js";const Y={class:"h-full w-full p-10 flex justify-center items-center"},Z={class:"app-info w-96 inline-block text-center rounded-lg pa-4 bg-gradient-to-t from-yellow-900 to-yellow-700 text-white shadow-sm"},ee={class:"mb-3"},se=["src"],te={class:"font-bold mb-3"},oe={class:"py-3"},ne={class:"h-full flex items-center justify-center bg-gray-100"},ie=["onSubmit"],ae={class:"w-73"},le={class:"d-block d-md-none mt-4"},re={class:"mb-3"},de=["src"],ce={class:"text-center mb-3"},ue={class:"font-bold mb-1 text-2xl"},pe={class:"text-sm"},_e={class:"mb-3"},me={class:"relative"},ge={class:"grid grid-cols-3 gap-3"},fe={class:"mt-6"},ve={class:"mt-4 text-center"},be={class:"text-sm text-green-700"},we={key:0,class:"fixed bottom-8"},xe={__name:"Login",setup(he){const{t:u}=R.global;v("$moment");const h=v("$gv"),$=v("$sale"),{mobile:S}=U(),b=X(),z=W();let n=q({username:"",password:""});const _=H(),c=y(()=>JSON.parse(localStorage.getItem("setting"))),L=y(()=>_.state.isLoading),I=v("$auth");_.state.isLoading=!1;function p(d){n.password==null&&(n.password=""),n.password=n.password+d}function N(){n.password=""}function P(){return localStorage.getItem("is_window")=="1"}function V(){n.password=n.password.substring(0,n.password.length-1)}const B=async()=>{if(!n.password){b.warning(u("msg.Invalid PIN Code"),{position:"top"});return}_.dispatch("startLoading");let d=!1;x({url:"epos_restaurant_2023.api.api.check_username",auto:!0,params:{pin_code:n.password},async onSuccess(e){_.dispatch("startLoading"),n.username=e.username,n.username&&n.password&&(await I.login(n.username,n.password)?(E(e),j()):(b.warning("msg.Login fail Invalid username or password"),_.dispatch("endLoading")))},onError(e){d||(d=!0,_.dispatch("endLoading"),b.warning(u("msg.Invalid PIN Code"),{position:"top"}))}})};function E(d){x({url:"epos_restaurant_2023.api.api.get_user_information",auto:!0,async onSuccess(e){e.permission=d.permission,localStorage.setItem("current_user",JSON.stringify(e)),z.push({name:"Home"}),_.dispatch("endLoading")},onError(e){_.dispatch("endLoading")}})}function j(){x({url:"epos_restaurant_2023.api.promotion.check_promotion",cache:"check_promotion",auto:!0,params:{business_branch:h.setting.business_branch},onSuccess(d){h.promotion=d,$.promotion=d}})}function D(){const d={action:"exit"};window.chrome.webview.postMessage(JSON.stringify(d))}return(d,e)=>{const w=m("v-divider"),f=m("v-list-item"),O=m("v-list"),k=m("v-col"),A=m("v-text-field"),a=m("v-btn"),J=m("v-row");return C(),T(J,{class:"mt-0 mb-0 h-screen"},{default:i(()=>[t(k,{md:"6",lg:"8",class:"pa-0 d-sm-none d-none d-md-block"},{default:i(()=>[s("div",{class:"h-screen bg-cover bg-no-repeat bg-center",style:F({"background-image":"url("+o(c)?.login_background+")"})},[s("div",Y,[s("div",null,[s("div",Z,[s("div",ee,[s("img",{class:"my-0 mx-auto",src:o(c)?.logo},null,8,se)]),s("h1",te,g(o(c)?.app_name),1),t(w),s("div",oe,[t(O,{lines:"one","bg-color":"transparent"},{default:i(()=>[t(f,{class:"mb-2",title:o(c)?.business_branch,subtitle:o(u)("Business")},null,8,["title","subtitle"]),t(f,{class:"mb-2",title:o(c)?.pos_profile,subtitle:o(u)("POS Profile")},null,8,["title","subtitle"]),t(f,{class:"mb-2",title:o(c)?.phone_number,subtitle:o(u)("Phone Number")},null,8,["title","subtitle"]),t(f,{title:o(c)?.address,subtitle:o(u)("Address")},null,8,["title","subtitle"])]),_:1})])])])])],4)]),_:1}),t(k,{sm:"12",md:"6",lg:"4",class:"pa-0 relative"},{default:i(()=>[s("div",ne,[s("form",{onSubmit:G(B,["prevent"])},[s("div",ae,[s("div",null,[s("div",le,[s("div",re,[s("img",{class:"my-0 mx-auto w-16",src:o(c)?.logo},null,8,de)]),s("div",ce,[s("h1",ue,g(o(c)?.app_name),1),s("p",pe,g(o(c)?.business_branch),1),t(w)])]),s("div",_e,[s("div",me,[t(A,{readonly:o(S),type:"password",density:"compact",variant:"solo",autofocus:"",label:o(u)("Password"),"append-inner-icon":"mdi-arrow-left","single-line":"","hide-details":"",modelValue:o(n).password,"onUpdate:modelValue":e[0]||(e[0]=l=>o(n).password=l),height:"200","onClick:appendInner":e[1]||(e[1]=l=>V())},null,8,["readonly","label","modelValue"])])]),s("div",null,[s("div",ge,[t(a,{onClick:e[2]||(e[2]=l=>p("1")),size:"x-large"},{default:i(()=>[r(" 1 ")]),_:1}),t(a,{onClick:e[3]||(e[3]=l=>p("2")),size:"x-large"},{default:i(()=>[r(" 2 ")]),_:1}),t(a,{onClick:e[4]||(e[4]=l=>p("3")),size:"x-large"},{default:i(()=>[r(" 3 ")]),_:1}),t(a,{onClick:e[5]||(e[5]=l=>p("4")),size:"x-large"},{default:i(()=>[r(" 4 ")]),_:1}),t(a,{onClick:e[6]||(e[6]=l=>p("5")),size:"x-large"},{default:i(()=>[r(" 5 ")]),_:1}),t(a,{onClick:e[7]||(e[7]=l=>p("6")),size:"x-large"},{default:i(()=>[r(" 6 ")]),_:1}),t(a,{onClick:e[8]||(e[8]=l=>p("7")),size:"x-large"},{default:i(()=>[r(" 7 ")]),_:1}),t(a,{onClick:e[9]||(e[9]=l=>p("8")),size:"x-large"},{default:i(()=>[r(" 8 ")]),_:1}),t(a,{onClick:e[10]||(e[10]=l=>p("9")),size:"x-large"},{default:i(()=>[r(" 9 ")]),_:1}),t(a,{onClick:e[11]||(e[11]=l=>p("0")),size:"x-large"},{default:i(()=>[r(" 0 ")]),_:1}),t(a,{class:"col-span-2",color:"error",onClick:N,size:"x-large"},{default:i(()=>[r(g(o(u)("Clear")),1)]),_:1})])]),s("div",fe,[t(a,{type:"submit",loading:o(L),size:"x-large",class:"w-full",color:"primary"},{default:i(()=>[r(g(o(u)("Login")),1)]),_:1},8,["loading"])]),s("div",ve,[s("p",be,g(o(c)?.pos_profile),1)])])])],40,ie),P()?(C(),K("div",we,[t(a,{block:"",class:"w-full","prepend-icon":"mdi-window-close",size:"x-large",color:"error",onClick:e[12]||(e[12]=l=>D())},{default:i(()=>[r(g(o(u)("Exit")),1)]),_:1})])):Q("",!0)])]),_:1})]),_:1})}}},ye=M(xe,[["__scopeId","data-v-3ab83a0a"]]);export{ye as default};
