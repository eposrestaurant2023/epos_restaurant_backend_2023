var y=($,L,p)=>new Promise((S,o)=>{var u=_=>{try{v(p.next(_))}catch(l){o(l)}},r=_=>{try{v(p.throw(_))}catch(l){o(l)}},v=_=>_.done?S(_.value):Promise.resolve(_.value).then(u,r);v((p=p.apply($,L)).next())});import{_ as H,i as V,u as T,a as q,r as F,b as G,c as B,d as K,w as n,e as g,o as P,f as t,g as s,h as a,t as C,n as Q,j as X,k as c,l as Y,m as Z,p as j,A as ee}from"./index-88bfb967.js";const se={class:"h-full w-full p-10 flex justify-center items-center"},te={class:"app-info w-96 inline-block text-center rounded-lg pa-4 bg-gradient-to-t from-yellow-900 to-yellow-700 text-white shadow-sm"},oe={class:"mb-3"},ne=["src"],ie={class:"font-bold mb-3"},ae={class:"py-3"},le={class:"h-full flex items-center justify-center bg-gray-100"},re=["onSubmit"],de={class:"w-73"},ce={class:"d-block d-md-none mt-4"},ue={class:"mb-3"},_e=["src"],pe={class:"text-center mb-3"},me={class:"font-bold mb-1 text-2xl"},ge={class:"text-sm"},fe={class:"mb-3"},ve={class:"relative"},we={class:"grid grid-cols-3 gap-3"},be={class:"mt-6"},xe={class:"mt-4 text-center"},he={class:"text-sm text-green-700"},ke={key:0,class:"fixed bottom-2 right-2"},ye={__name:"Login",setup($){V("$moment");const{mobile:L}=T(),p=ee(),S=q();let o=F({username:"",password:""});const u=G(),r=B(()=>JSON.parse(localStorage.getItem("setting"))),v=B(()=>u.state.isLoading),_=V("$auth");u.state.isLoading=!1;function l(f){o.password==null&&(o.password=""),o.password=o.password+f}function E(){o.password=""}function O(){return localStorage.getItem("is_window")=="1"}function A(){o.password=o.password.substring(0,o.password.length-1)}const D=()=>y(this,null,function*(){if(!o.password){p.warning("Invalid Password",{position:"top"});return}u.dispatch("startLoading"),j({url:"epos_restaurant_2023.api.api.check_username",auto:!0,params:{pin_code:o.password},onSuccess(e){return y(this,null,function*(){u.dispatch("startLoading"),o.username=e.username,o.username&&o.password&&((yield _.login(o.username,o.password))?J(e):(p.warning("Login fail. Invalid username or password."),u.dispatch("endLoading")))})},onError(e){u.dispatch("endLoading")}})});function J(f){j({url:"epos_restaurant_2023.api.api.get_user_information",auto:!0,onSuccess(m){return y(this,null,function*(){m.permission=f.permission,localStorage.setItem("current_user",JSON.stringify(m)),S.push({name:"Home"}),u.dispatch("endLoading")})},onError(m){u.dispatch("endLoading")}})}function M(){const f={action:"exit"};window.chrome.webview.postMessage(JSON.stringify(f))}return(f,e)=>{const m=g("v-divider"),k=g("v-list-item"),R=g("v-list"),z=g("v-col"),U=g("v-text-field"),d=g("v-btn"),W=g("v-row");return P(),K(W,{class:"mt-0 mb-0 h-screen"},{default:n(()=>[t(z,{md:"6",lg:"8",class:"pa-0 d-sm-none d-none d-md-block"},{default:n(()=>{var w,b,x;return[s("div",{class:"h-screen bg-cover bg-no-repeat bg-center",style:Q({"background-image":"url("+((w=a(r))==null?void 0:w.login_background)+")"})},[s("div",se,[s("div",null,[s("div",te,[s("div",oe,[s("img",{class:"my-0 mx-auto",src:(b=a(r))==null?void 0:b.logo},null,8,ne)]),s("h1",ie,C((x=a(r))==null?void 0:x.app_name),1),t(m),s("div",ae,[t(R,{lines:"one","bg-color":"transparent"},{default:n(()=>{var h,i,I,N;return[t(k,{class:"mb-2",title:(h=a(r))==null?void 0:h.business_branch,subtitle:"Business"},null,8,["title"]),t(k,{class:"mb-2",title:(i=a(r))==null?void 0:i.pos_profile,subtitle:"POS Profile"},null,8,["title"]),t(k,{class:"mb-2",title:(I=a(r))==null?void 0:I.phone_number,subtitle:"Phone Number"},null,8,["title"]),t(k,{title:(N=a(r))==null?void 0:N.address,subtitle:"Address"},null,8,["title"])]}),_:1})])])])])],4)]}),_:1}),t(z,{sm:"12",md:"6",lg:"4",class:"pa-0 relative"},{default:n(()=>{var w,b,x,h;return[s("div",le,[s("form",{onSubmit:X(D,["prevent"])},[s("div",de,[s("div",null,[s("div",ce,[s("div",ue,[s("img",{class:"my-0 mx-auto w-16",src:(w=a(r))==null?void 0:w.logo},null,8,_e)]),s("div",pe,[s("h1",me,C((b=a(r))==null?void 0:b.app_name),1),s("p",ge,C((x=a(r))==null?void 0:x.business_branch),1),t(m)])]),s("div",fe,[s("div",ve,[t(U,{readonly:a(L),type:"password",density:"compact",variant:"solo",autofocus:"",label:"Password","append-inner-icon":"mdi-arrow-left","single-line":"","hide-details":"",modelValue:a(o).password,"onUpdate:modelValue":e[0]||(e[0]=i=>a(o).password=i),height:"200","onClick:appendInner":e[1]||(e[1]=i=>A())},null,8,["readonly","modelValue"])])]),s("div",null,[s("div",we,[t(d,{onClick:e[2]||(e[2]=i=>l("1")),size:"x-large"},{default:n(()=>[c(" 1 ")]),_:1}),t(d,{onClick:e[3]||(e[3]=i=>l("2")),size:"x-large"},{default:n(()=>[c(" 2 ")]),_:1}),t(d,{onClick:e[4]||(e[4]=i=>l("3")),size:"x-large"},{default:n(()=>[c(" 3 ")]),_:1}),t(d,{onClick:e[5]||(e[5]=i=>l("4")),size:"x-large"},{default:n(()=>[c(" 4 ")]),_:1}),t(d,{onClick:e[6]||(e[6]=i=>l("5")),size:"x-large"},{default:n(()=>[c(" 5 ")]),_:1}),t(d,{onClick:e[7]||(e[7]=i=>l("6")),size:"x-large"},{default:n(()=>[c(" 6 ")]),_:1}),t(d,{onClick:e[8]||(e[8]=i=>l("7")),size:"x-large"},{default:n(()=>[c(" 7 ")]),_:1}),t(d,{onClick:e[9]||(e[9]=i=>l("8")),size:"x-large"},{default:n(()=>[c(" 8 ")]),_:1}),t(d,{onClick:e[10]||(e[10]=i=>l("9")),size:"x-large"},{default:n(()=>[c(" 9 ")]),_:1}),t(d,{onClick:e[11]||(e[11]=i=>l("0")),size:"x-large"},{default:n(()=>[c(" 0 ")]),_:1}),t(d,{class:"col-span-2",color:"error",onClick:E,size:"x-large"},{default:n(()=>[c(" Clear ")]),_:1})])]),s("div",be,[t(d,{type:"submit",loading:a(v),size:"x-large",class:"w-full",color:"primary"},{default:n(()=>[c("Login")]),_:1},8,["loading"])]),s("div",xe,[s("p",he,C((h=a(r))==null?void 0:h.pos_profile),1)])])])],40,re),O()?(P(),Y("div",ke,[t(d,{block:"","prepend-icon":"mdi-window-close",color:"error",onClick:e[12]||(e[12]=i=>M())},{default:n(()=>[c("exit")]),_:1})])):Z("",!0)])]}),_:1})]),_:1})}}},Se=H(ye,[["__scopeId","data-v-d23cd7f2"]]);export{Se as default};
